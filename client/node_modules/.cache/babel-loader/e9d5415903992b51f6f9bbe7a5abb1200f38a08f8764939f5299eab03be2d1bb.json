{"ast":null,"code":"import React,{useEffect,useState}from'react';import Layout from'./Layout';import AddCarForm from'./AddCarForm';import Filter from'./Filter';import{getCars,addCar,deleteCar}from'../services/carService';import{useNavigate}from'react-router-dom';import CarItem from'./CarItem';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminAddCars(){const[cars,setCars]=useState([]);const[filteredCars,setFilteredCars]=useState([]);const navigate=useNavigate();useEffect(()=>{fetchCars();},[]);const fetchCars=async()=>{try{const cars=await getCars();setCars(cars);setFilteredCars(cars);}catch(error){console.error('Error fetching cars:',error);setCars([]);setFilteredCars([]);}};const handleAddCar=async formData=>{try{await addCar(formData);fetchCars();}catch(error){console.error('Error adding car:',error);}};const handleDeleteCar=async id=>{try{await deleteCar(id);fetchCars();}catch(error){console.error('Error deleting car:',error);}};const handleFilter=_ref=>{let{kind,maxPrice,maxKilometer,maxYear}=_ref;let filtered=cars;if(kind){filtered=filtered.filter(car=>car.kind===kind);}if(maxPrice){filtered=filtered.filter(car=>car.price<=maxPrice);}if(maxKilometer){filtered=filtered.filter(car=>car.kilometer<=maxKilometer);}if(maxYear){filtered=filtered.filter(car=>car.year<=maxYear);}setFilteredCars(filtered);};const handleLogout=()=>{localStorage.removeItem('isAuthenticated');navigate('/login');};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl mb-4\",children:\"\\u05E4\\u05D5\\u05E8\\u05DE\\u05D8 \\u05D4\\u05D5\\u05E1\\u05E4\\u05EA \\u05D5\\u05DE\\u05D7\\u05D9\\u05E7\\u05EA \\u05E8\\u05DB\\u05D1\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"p-2 bg-red-500 text-white rounded mb-4\",children:\"Logout\"}),/*#__PURE__*/_jsx(AddCarForm,{onAdd:handleAddCar}),/*#__PURE__*/_jsx(Filter,{onFilter:handleFilter}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\",children:Array.isArray(filteredCars)&&filteredCars.map(car=>/*#__PURE__*/_jsx(CarItem,{car:car,handleDeleteCar:handleDeleteCar},car._id))})]})});}export default AdminAddCars;","map":{"version":3,"names":["React","useEffect","useState","Layout","AddCarForm","Filter","getCars","addCar","deleteCar","useNavigate","CarItem","jsx","_jsx","jsxs","_jsxs","AdminAddCars","cars","setCars","filteredCars","setFilteredCars","navigate","fetchCars","error","console","handleAddCar","formData","handleDeleteCar","id","handleFilter","_ref","kind","maxPrice","maxKilometer","maxYear","filtered","filter","car","price","kilometer","year","handleLogout","localStorage","removeItem","children","className","onClick","onAdd","onFilter","Array","isArray","map","_id"],"sources":["C:/Users/Ori/OneDrive/מסמכים/GitHub/S.Keysar_CarSite/client/src/components/AdminAddCars.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Layout from './Layout';\r\nimport AddCarForm from './AddCarForm';\r\nimport Filter from './Filter';\r\nimport { getCars, addCar, deleteCar } from '../services/carService';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport CarItem from './CarItem';\r\n\r\nfunction AdminAddCars() {\r\n  const [cars, setCars] = useState([]);\r\n  const [filteredCars, setFilteredCars] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchCars();\r\n  }, []);\r\n\r\n  const fetchCars = async () => {\r\n    try {\r\n      const cars = await getCars();\r\n      setCars(cars);\r\n      setFilteredCars(cars);\r\n    } catch (error) {\r\n      console.error('Error fetching cars:', error);\r\n      setCars([]);\r\n      setFilteredCars([]);\r\n    }\r\n  };\r\n\r\n  const handleAddCar = async (formData) => {\r\n    try {\r\n      await addCar(formData);\r\n      fetchCars();\r\n    } catch (error) {\r\n      console.error('Error adding car:', error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCar = async (id) => {\r\n    try {\r\n      await deleteCar(id);\r\n      fetchCars();\r\n    } catch (error) {\r\n      console.error('Error deleting car:', error);\r\n    }\r\n  };\r\n\r\n  const handleFilter = ({ kind, maxPrice, maxKilometer, maxYear }) => {\r\n    let filtered = cars;\r\n\r\n    if (kind) {\r\n      filtered = filtered.filter(car => car.kind === kind);\r\n    }\r\n\r\n    if (maxPrice) {\r\n      filtered = filtered.filter(car => car.price <= maxPrice);\r\n    }\r\n\r\n    if (maxKilometer) {\r\n      filtered = filtered.filter(car => car.kilometer <= maxKilometer);\r\n    }\r\n\r\n    if (maxYear) {\r\n      filtered = filtered.filter(car => car.year <= maxYear);\r\n    }\r\n\r\n    setFilteredCars(filtered);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('isAuthenticated');\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"text-center\">\r\n        <h2 className=\"text-3xl mb-4\">פורמט הוספת ומחיקת רכבים</h2>\r\n        <button onClick={handleLogout} className=\"p-2 bg-red-500 text-white rounded mb-4\">\r\n          Logout\r\n        </button>\r\n        <AddCarForm onAdd={handleAddCar} />\r\n        <Filter onFilter={handleFilter} />\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n          {Array.isArray(filteredCars) && filteredCars.map((car) => (\r\n            <CarItem key={car._id} car={car} handleDeleteCar={handleDeleteCar} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default AdminAddCars;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}